# 技術說明：熱量與體重模擬模型

本文件旨在詳細說明模擬器用於計算使用者熱量消耗、淨熱量盈虧以及長期體重變化趨勢的數學模型與參數依據。所有計算均基於公認的運動科學和營養學標準。

## 一、基礎代謝率 (BMR) 計算

BMR（Basal Metabolic Rate）是維持身體基本機能所需的最低熱量。模擬器採用精確度較高的 **Mifflin-St Jeor 方程式**。

### 1.1 BMR 計算公式

$$\text{BMR} = (10 \times W) + (6.25 \times H) - (5 \times A) + S $$
**變數定義:** 
* $W$: 體重 (單位：公斤, $\text{kg}$) 
* $H$: 身高 (單位：公分, $\text{cm}$) 
* $A$: 年齡 (單位：歲) * $S$: 性別係數 
* 男性 ($S = +5$) 
* 女性 ($S = -161$) 

### 1.2 國際標準依據 

Mifflin-St Jeor 方程式因其在各種體重範圍內的高度準確性，被廣泛推薦為臨床和營養學中估算 BMR 的標準方法。

----- 
## 二、每日總熱量消耗 (TDEE) 
TDEE（Total Daily Energy Expenditure）是 BMR 加上日常生活和活動的總熱量。 

### 2.1 TDEE 計算公式

$$\text{TDEE} = \text{BMR} \times \text{活動係數} $$

### 2.2 活動係數（Activity Factors）

| 標準 | 活動程度: 描述 | 活動係數 | 
| :--- | :--- | :--- |
| 久坐不動 | 辦公室工作，很少或沒有運動。 | $1.2$ | 
| 輕度活動 | 輕度運動或站立工作，每週 1-3 天。 | $1.375$ | 
| 中度活動 | 中度運動，每週 3-5 天。 | $1.55$ | 
| 高度活動 | 劇烈運動，每週 6-7 天，或從事體力勞動。 | $1.725$ | 
| 極度活動 | 專業運動訓練或每日雙重訓練。 | $1.9$ | 

活動係數是根據美國運動醫學會（ACSM）及相關衛生組織的建議標準。 

----- 
## 三、運動額外熱量消耗 (EE) 

運動消耗是利用代謝當量 (METs) 進行估算。此消耗量將會疊加到 TDEE 中。 ### 3.1 運動消耗 (EE) 

計算公式

$$ \text{EE}(\text{大卡}) = \frac{\text{METs} \times 3.5 \times W}{200} \times T $$

**變數定義:**

- $\text{METs}$: 運動的代謝當量。
    
- $W$: 體重 (單位：$\text{kg}$)。
    
- $T$: 運動時間 (單位：分鐘)。
    
- $\frac{3.5}{200}$: 將 $mL/\text{kg}/\text{min}$ 單位轉換為 $\text{Kcal}/\text{min}$ 的常數。
    
### 3.2 代謝當量 (METs) 參考標準
所有 METs 數值均參照 **《身體活動綜覽》（Compendium of Physical Activities）** 的國際標準。

|運動類型|運動強度描述|METs 數值|
|---|---|---|
|跑步|慢跑 (約 8 km/h)|$8.0$|
|跑步|衝刺跑 (約 12 km/h 以上)|$12.5$|
|游泳|輕量/休閒式游泳|$6.0$|
|單車|中度 (約 20-25 km/h)|$10.0$|
|肌力訓練|中度努力 (一般訓練)|$5.0$|
|日常活動|快步走 (購物、通勤)|$3.5$|

## 四、體重趨勢迭代模擬模型

為了更準確地預測長期趨勢，模擬器採用 **每週迭代** 模型，而非線性推算，因為代謝率會隨著體重變化而改變。

### 4.1 核心迭代機制

1. **每日淨熱量盈虧計算:**
    
$$\text{淨熱量} = \text{飲食攝取} - (\text{TDEE} + \text{總運動消耗})$$

2. **每日體重變化預估 (公斤):** 假設 $1 \text{ kg}$ 體脂約等於 $7700 \text{ 大卡}$ 的熱量差。

$$\\text{每日變化} = \\frac{\\text{淨熱量}}{7700}$$

3. **迭代步驟（每週）:**
    
    - **初始週 (**$W_0$**):** 體重使用使用者輸入的初始值。
        
    - **計算下一週體重 (**$W_i$**):** 第 $i$ 週結束的體重 $W_i$ 會根據前一週的體重 $W_{i-1}$ 和該週累積的淨熱量盈虧計算得出。
        
    - **動態 BMR 調整:** 在計算 **第** $i+1$ **週** 的 TDEE 時，其基礎 BMR ($\text{BMR}_{i+1}$) 將會使用 **第** $i$ **週結束** 的體重 $W_i$ 重新計算。
        

此迭代機制（體重變化 $\rightarrow$ BMR 變化 $\rightarrow$ TDEE 變化 $\rightarrow$ 淨熱量變化 $\rightarrow$ 體重變化）確保了模擬結果的非線性回饋，更貼近真實的人體生理反應。